/**
 * Created by hvail on 2018/9/30.
 */
const net = require('net');
const SocketTick = (host, port, msg) => {
    let fn = (res, rej) => {
        let client = net.createConnection({host: host, port: port}, () => client.write(msg));
        client.on('data', (data) => {
            client.end();
            res(data);

        });
        client.on('error', (err) => {
            client.close();
            rej(err);
        });
        // client.on('end', () => console.log('end'));
        // client.on('close', () => console.log('close'));
    };
    return new Promise(fn);
};
module.exports = {short: SocketTick};